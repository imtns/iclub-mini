require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/userAbout/index"],{"2aab":function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return o}));var o={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"27c0"))},globalCaptcha:function(){return Promise.all([t.e("common/vendor"),t.e("components/global/captcha")]).then(t.bind(null,"2e67"))},globalPrivacyPopup:function(){return t.e("components/global/privacy-popup").then(t.bind(null,"abb5"))},xToast:function(){return t.e("components/x/toast").then(t.bind(null,"f8a6"))}},s=function(){var e=this,n=e.$createElement,t=(e._self._c,e._f("phoneFilter")(e.userInfo.phone));e.$mp.data=Object.assign({},{$root:{f0:t}})},c=[]},"323b":function(e,n,t){},4963:function(e,n,t){"use strict";t.r(n);var o=t("2aab"),s=t("af3b");for(var c in s)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return s[e]}))}(c);t("8126");var a,u=t("f0c5"),i=Object(u["a"])(s["default"],o["b"],o["c"],!1,null,"7609f082",null,!1,o["a"],a);n["default"]=i.exports},"66f9":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(t("b645")),s=t("e8e8");function c(e){return e&&e.__esModule?e:{default:e}}var a=function(){t.e("pages/mine/userAbout/components/PicPopup").then(function(){return resolve(t("0f78"))}.bind(null,t)).catch(t.oe)},u=function(){t.e("pages/mine/userAbout/components/NameChange").then(function(){return resolve(t("232e"))}.bind(null,t)).catch(t.oe)},i={components:{PicPopup:a,NameChange:u},filters:{phoneFilter:function(e){var n=/^(.{3}).*(.{4})$/;return e.replace(n,"$1****$2")}},data:function(){return{localNickName:this.$store.state.userInfo.nickName,sel:0,picList:["https://udstatic.imeik.com/pcUploads/1705285352902/1.png","https://udstatic.imeik.com/pcUploads/1705285380205/2.png","https://udstatic.imeik.com/pcUploads/1705285409154/3.png"]}},computed:{userPic:function(){return this.$store.state.userPic},userTag:function(){return this.$store.state.userTag},userInfo:function(){return this.$store.state.userInfo}},watch:{"$store.state.userInfo.nickName":function(e){this.localNickName=e}},created:function(){wx.hideShareMenu({})},methods:{handlePopupClose:function(){this.$refs.nameChange.close()},cleanNickName:function(){this.localNickName=""},handleNameChange:function(e){var n=this;this.localNickName=e;var t={nickName:this.localNickName,userCode:this.userInfo.objectCode};(0,s.updateUserInfo)(t).then((function(e){200===e.code&&(n.$refs.toast.show({message:"修改成功"}),n.$store.dispatch("getUserInfo"),n.$refs.nameChange.close())})).catch((function(e){n.$refs.toast.show({message:e.message})}))},open:function(){this.$refs.addresPopup.open()},clean:function(){this.$refs.addresPopup.close()},toTrouch:function(){e.makePhoneCall({phoneNumber:"400-001-6195",success:function(e){console.log("调用成功!")},fail:function(e){console.log("调用失败!")}})},goNickName:function(){this.$refs.nameChange.open()},goUserTag:function(){e.navigateTo({url:"/pages/mine/userAbout/userTag"})},openSetting:function(){return new Promise((function(n,t){e.showModal({title:"授权",content:"请先授权获取摄像头权限",success:function(t){t.confirm?e.openSetting({success:function(e){e.authSetting["scope.camera"]&&n(!0)},fail:function(e){console.log(e)}}):t.cancel}})}))},picPopupFun:function(){this.$refs.picPopup.openPopup()},onPopupClosed:function(){this.$refs.picPopup.closePopup()},onPicSelected:function(e,n){this.path=e.pic,this.sel=n},imageUP:function(n){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:[n],success:function(e){var n="image",o=e.tempFiles[0].path;t.aliUploadFun(o,n,e)}})},onSubmit:function(){var e=this;(0,s.updateUserInfo)({headUrl:this.path}).then((function(n){e.$refs.toast.show({message:"修改成功"}),e.$store.dispatch("getUserInfo"),e.$refs.picPopup.closePopup(),e.clean()})).catch((function(n){e.$refs.toast.show({message:n.message}),e.$refs.picPopup.closePopup(),e.clean()}))},aliUploadFun:function(e,n,t){var c=this,a=this;o.default.upload(e,n,(function(e){if(console.log("datas----------",e),e){console.log("图片上传成功",e),a.ls("userInfo",a.userInfo);var n={headUrl:e};(0,s.updateUserInfo)(n).then((function(n){c.$refs.toast.show({message:"修改成功"}),a.userInfo.headUrl=e,c.$store.dispatch("getUserInfo"),c.clean()})).catch((function(e){c.$refs.toast.show({message:e.message}),c.$refs.picPopup.closePopup(),c.clean()}))}else console.log("图片上传失败，请稍后重试")}))}}};n.default=i}).call(this,t("543d")["default"])},8126:function(e,n,t){"use strict";var o=t("323b"),s=t.n(o);s.a},af3b:function(e,n,t){"use strict";t.r(n);var o=t("66f9"),s=t.n(o);for(var c in o)["default"].indexOf(c)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(c);n["default"]=s.a},b09a:function(e,n,t){"use strict";(function(e){t("6cdc");o(t("66fd"));var n=o(t("4963"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])}},[["b09a","common/runtime","common/vendor","pages/mine/common/vendor"]]]);