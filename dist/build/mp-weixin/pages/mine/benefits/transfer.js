require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/benefits/transfer"],{"4dd0":function(n,e,t){"use strict";var o=t("68ad"),r=t.n(o);r.a},"68ad":function(n,e,t){},"7e0b":function(n,e,t){"use strict";(function(n){t("6cdc");o(t("66fd"));var e=o(t("9910"));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=t,n(e.default)}).call(this,t("543d")["createPage"])},"7f0a":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(t("fa7f")),r=t("18a7");function i(n){return n&&n.__esModule?n:{default:n}}var u={mixins:[o.default],onShareAppMessage:function(n){var e={title:"爱美客产品福利",path:"/pages/mine/benefits/my",imageUrl:"https://imeikud.oss-cn-beijing.aliyuncs.com/pcUploads/1701398724380/fuli-share.png"};return"button"===n.from&&(e.title="".concat(this.userInfo.nickName,"转赠您一份").concat(this.form.changeWelfare,"元的产品福利金，快来点击查看吧")),e},data:function(){var n=this;return{myMoney:0,btnLoading:!1,userInfo:this.lsGet("userInfo"),shareInfo:{title:"爱美客产品福利，等你来体验",path:"/pages/mine/benefits/my",imageUrl:"https://imeikud.oss-cn-beijing.aliyuncs.com/pcUploads/1701398724380/fuli-share.png"},form:{changeWelfare:"",phone:"",userName:"",verifyCode:""},rules:{userName:{rules:[{required:!0,errorMessage:"姓名不能为空"}]},phone:{rules:[{required:!0,errorMessage:"转赠用户手机号不能为空"},{validateFunction:function(e,t,o,r){return 11!=t.length?r("请输入11位手机号"):t===n.userInfo.phone&&r("不支持填写自己的手机号"),!0}}]},changeWelfare:{rules:[{required:!0,errorMessage:"转赠金额不能为空"},{validateFunction:function(n,e,t,o){var r=!isNaN(e.replace(/,/g,""));return r?Number(e)>999999999&&o("最多输入9位"):o("金额只能是数字"),!0}}]},verifyCode:{rules:[{required:!0,errorMessage:"请输入验证码"}]}}}},onLoad:function(n){this.myMoney=n.money,wx.hideShareMenu()},watch:{},onReady:function(){var n=this;this.$nextTick((function(){n.$refs.refForm.setRules(n.rules)}))},mounted:function(){},created:function(){},methods:{onBlur:function(){var n=this;+this.form.changeWelfare>+this.myMoney?(this.$refs.toast.show({message:"可用福利金不足，无法转赠",duration:2e3}),this.$nextTick((function(){n.form.changeWelfare=""}))):+this.form.changeWelfare<=0&&this.$nextTick((function(){n.form.changeWelfare=""}))},handleAction:function(e){n.navigateBack()},onTransferConfirm:function(){var n=this,e=this;console.log("form::",this.form),this.$refs.refForm.validate().then((function(){n.codeSended?(e.btnLoading=!0,(0,r.transferBenefis)(e.form).then((function(n){console.log("result",n),e.$refs.resultPop.open()})).catch((function(n){console.log("gfggggg",n),e.$refs.toast.show({message:n.message})})).finally((function(){e.btnLoading=!1}))):n.$refs.toast.show({message:"请获取手机验证码"})})).catch((function(n){console.log("err",n)})).finally((function(){wx.hideLoading()}))}}};e.default=u}).call(this,t("543d")["default"])},8344:function(n,e,t){"use strict";t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return o}));var o={xWrapper:function(){return t.e("components/x/wrapper").then(t.bind(null,"187c"))},xSection:function(){return t.e("components/x/section").then(t.bind(null,"8af3"))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"2cf2"))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"11e2"))},xInput:function(){return t.e("components/x/input").then(t.bind(null,"612d"))},uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"27c0"))},xFooter:function(){return t.e("components/x/footer").then(t.bind(null,"9424"))},xBtn:function(){return t.e("components/x/btn").then(t.bind(null,"4f71"))},xToast:function(){return t.e("components/x/toast").then(t.bind(null,"f8a6"))},globalCaptcha:function(){return Promise.all([t.e("common/vendor"),t.e("components/global/captcha")]).then(t.bind(null,"2e67"))},globalPrivacyPopup:function(){return t.e("components/global/privacy-popup").then(t.bind(null,"abb5"))}},r=function(){var n=this,e=n.$createElement,t=(n._self._c,n.$hiddenPhone());n.$mp.data=Object.assign({},{$root:{m0:t}})},i=[]},9910:function(n,e,t){"use strict";t.r(e);var o=t("8344"),r=t("e24f");for(var i in r)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(i);t("4dd0");var u,a=t("f0c5"),s=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"bdcacd12",null,!1,o["a"],u);e["default"]=s.exports},e24f:function(n,e,t){"use strict";t.r(e);var o=t("7f0a"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e["default"]=r.a}},[["7e0b","common/runtime","common/vendor","pages/mine/common/vendor"]]]);