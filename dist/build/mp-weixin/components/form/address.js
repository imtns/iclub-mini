(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/form/address"],{"0278":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var i={uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"11e2"))},formViewItem:function(){return t.e("components/form/view-item").then(t.bind(null,"31cc"))}},r=function(){var e=this,n=e.$createElement;e._self._c},a=[]},"0b5c":function(e,n,t){"use strict";t.r(n);var i=t("0278"),r=t("a739");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("0f8ba");var u,o=t("f0c5"),s=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"bc7309ec",null,!1,i["a"],u);n["default"]=s.exports},"0f8ba":function(e,n,t){"use strict";var i=t("eb7b"),r=t.n(i);r.a},a739:function(e,n,t){"use strict";t.r(n);var i=t("cf01"),r=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=r.a},cf01:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t("2946"),r=t("a049"),a={props:{inputValue:{type:[Array,Number,String],default:function(){return[]}},field:{type:Object,default:function(){}},model:{type:Object,default:function(){}}},data:function(){return{loadding:!1,range:[],zonesTree:[],indexArray:[],address:""}},computed:{depth:function(){return this.field.props&&this.field.props.depth||2},extra:function(){return(0,i.getExtraPosition)(this.field)}},watch:{inputValue:{handler:function(e,n){JSON.stringify(e)!==JSON.stringify(n)&&(this.getSelectedIndex(),this.regionChange({detail:{value:this.indexArray}}))},immediate:!0}},created:function(){this.setFieldRule()},mounted:function(){this.getTreeData()},methods:{setFieldRule:function(){var e=(0,i.getCommonRules)(this.field);this.$emit("updateRules",this.field.code,e)},getTreeData:function(){var e=this;(0,r.cityTree)().then((function(n){e.zonesTree=e.formatData(n,1),e.getSelectedIndex(),e.rangeSet(),e.regionChange({detail:{value:e.indexArray}})})).finally((function(){e.loadding=!0}))},formatData:function(e,n){for(var t=0;t<e.length;t++){var i=e[t];this.depth&&this.depth===n?delete i.subRegin:(i.subRegin&&0===i.subRegin.length&&delete i.subRegin,i.subRegin&&i.subRegin.length>0&&this.formatData(i.subRegin,n+1))}return e},getSelectedIndex:function(){var e=this.inputValue||[];"number"===typeof e&&(e=[e+""]),"string"==typeof e&&(e=e.split(","));var n=e[e.length-1];if(n&&this.zonesTree.length){var t=[],i=function e(i,r,a){for(var u=0;u<i.length;u++){var o=i[u];if(r[a]=u,o.code===n)return void(t=[].concat(r));o.subRegin&&o.subRegin.length&&e(o.subRegin,r,a+1)}};i(this.zonesTree,[],0),this.indexArray=t}},rangeSet:function(){var e=this,n=Array.from({length:this.depth},(function(){return[]}));n[0]=this.zonesTree.map((function(e){return e.name}));var t=function t(i,r){var a=e.indexArray[r-1]||0;i[a]&&i[a].subRegin&&(n[r]=i[a].subRegin.map((function(e){return e.name})),t(i[a].subRegin,r+1))};t(this.zonesTree,1),this.range=n},regionChange:function(e){var n=e.detail.value;if(n&&n.length){var t=[],i=[];n=n.map((function(e){return e||0}));var r=function e(r,a){var u=r[n[a]];t[a]=u.name,i[a]=u.code,u&&u.subRegin&&e(u.subRegin,a+1)};r(this.zonesTree,0),this.address=t.join(" ");var a=this.deepClone(this.model);a[this.field.code]=i;var u=this.field.nameKey||"".concat(this.field.code,"_fullname");a[u]=t.join(" "),this.$emit("update:model",a),this.$refs.dfi.clearValidate()}},regionChangeCol:function(e){var n=this,t=e.detail.column;this.indexArray.forEach((function(e,i){i>t&&(n.indexArray[i]=0)})),this.indexArray[t]=e.detail.value,this.rangeSet()},formatValue:function(e,n){var t=e[n.code];return"".concat(t)}}};n.default=a},eb7b:function(e,n,t){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/form/address-create-component',
    {
        'components/form/address-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("0b5c"))
        })
    },
    [['components/form/address-create-component']]
]);
